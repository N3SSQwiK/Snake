<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Snake Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <!-- HUD (above canvas, visible during gameplay) -->
        <div class="game-hud" id="game-hud">
            <div class="hud-stat">
                <span class="hud-label">Score</span>
                <span class="hud-value" id="hud-score">0</span>
            </div>
            <div class="hud-stat">
                <span class="hud-label">Length</span>
                <span class="hud-value" id="hud-length">3</span>
            </div>
            <div class="hud-stat">
                <span class="hud-label">Difficulty</span>
                <span class="hud-value" id="hud-difficulty">Medium</span>
            </div>
            <div class="hud-stat hud-stat--toxic" id="hud-toxic" hidden>
                <span class="hud-label">Toxic Penalty</span>
                <span class="hud-value hud-value--danger">
                    <span id="hud-toxic-points">-5 pts</span>
                    <span class="hud-sep">|</span>
                    <span id="hud-toxic-segments">-1 seg</span>
                </span>
            </div>
        </div>

        <canvas id="game-canvas"></canvas>

        <!-- UI Overlay â€” screens shown/hidden via data-state and data-ui attributes -->
        <div id="overlay" class="overlay">

            <!-- Start Menu -->
            <div class="screen-menu" role="dialog" aria-label="Start menu">
                <div class="ui-panel">
                    <h1 class="ui-title">SNAKE</h1>
                    <div class="ui-btn-group">
                        <button class="ui-btn ui-btn--primary" data-action="play">Play</button>
                        <button class="ui-btn ui-btn--ghost" data-action="settings">Settings</button>
                        <button class="ui-btn ui-btn--ghost" data-action="highscores">High Scores</button>
                    </div>
                </div>
            </div>

            <!-- Pause Overlay -->
            <div class="screen-pause" role="dialog" aria-label="Game paused">
                <div class="ui-panel">
                    <h2 class="ui-heading">Paused</h2>
                    <div class="ui-btn-group">
                        <button class="ui-btn ui-btn--primary" data-action="resume">Resume</button>
                        <button class="ui-btn ui-btn--ghost" data-action="settings">Settings</button>
                        <button class="ui-btn ui-btn--danger" data-action="quit">Quit</button>
                    </div>
                </div>
            </div>

            <!-- Game Over Screen -->
            <div class="screen-gameover" role="dialog" aria-label="Game over">
                <div class="ui-panel">
                    <h2 class="ui-heading" id="gameover-heading">Game Over</h2>
                    <p class="ui-score" id="final-score">0</p>
                    <p class="ui-label" id="best-score"></p>
                    <p class="ui-label" id="leaderboard-status"></p>
                    <p class="ui-label theme-unlock-notice" id="theme-unlock-status"></p>
                    <div class="ui-btn-group">
                        <button class="ui-btn ui-btn--primary" data-action="restart">Restart</button>
                        <button class="ui-btn ui-btn--ghost" data-action="highscores">View Leaderboard</button>
                        <button class="ui-btn ui-btn--ghost" data-action="menu">Menu</button>
                    </div>
                </div>
            </div>

            <!-- Initials Entry (modal overlay) -->
            <div class="screen-initials" role="dialog" aria-label="Enter initials">
                <div class="ui-panel">
                    <h2 class="ui-heading">New High Score!</h2>
                    <p class="ui-score" id="initials-score">0</p>
                    <div class="initials-slots">
                        <div class="initials-slot initials-slot--active" data-index="0">A</div>
                        <div class="initials-slot" data-index="1">A</div>
                        <div class="initials-slot" data-index="2">A</div>
                        <input id="initials-mobile-input" type="text" autocomplete="off" autocapitalize="characters" maxlength="1" aria-label="Type letter" />
                    </div>
                    <p class="ui-label">Type or tap slots to enter, arrows to cycle</p>
                    <div class="ui-btn-group">
                        <button class="ui-btn ui-btn--primary" data-action="submit-initials">Submit</button>
                        <button class="ui-btn ui-btn--ghost" data-action="skip-initials">Skip</button>
                    </div>
                </div>
            </div>

            <!-- Leaderboard (modal overlay) -->
            <div class="screen-leaderboard" role="dialog" aria-label="High scores">
                <div class="ui-panel ui-panel--wide">
                    <button class="ui-panel__close" data-action="leaderboard-back" aria-label="Close leaderboard">&times;</button>
                    <h2 class="ui-heading">High Scores</h2>
                    <div class="leaderboard-table" id="leaderboard-body" aria-live="polite" aria-atomic="true"></div>
                </div>
            </div>

            <!-- Settings Screen (modal overlay) -->
            <div class="screen-settings" role="dialog" aria-label="Settings">
                <div class="ui-panel">
                    <button class="ui-panel__close" data-action="settings-back" aria-label="Close settings">&times;</button>
                    <h2 class="ui-heading">Settings</h2>
                    <div class="ui-setting-group">
                        <label class="ui-label">Difficulty</label>
                        <div class="ui-segmented" id="difficulty-selector" role="radiogroup" aria-label="Difficulty">
                            <button class="ui-segmented__option" data-difficulty="easy" role="radio" aria-checked="false">
                                <span class="ui-segmented__label">Easy</span>
                                <span class="ui-segmented__desc">Walls wrap, no hazard food</span>
                            </button>
                            <button class="ui-segmented__option" data-difficulty="medium" role="radio" aria-checked="true">
                                <span class="ui-segmented__label">Medium</span>
                                <span class="ui-segmented__desc">Walls kill, toxic food appears</span>
                            </button>
                            <button class="ui-segmented__option" data-difficulty="hard" role="radio" aria-checked="false">
                                <span class="ui-segmented__label">Hard</span>
                                <span class="ui-segmented__desc">Walls kill, toxic and lethal food</span>
                            </button>
                        </div>
                    </div>
                    <div class="ui-setting-row">
                        <label class="ui-label" for="animation-style-toggle">Smooth Animation</label>
                        <button class="ui-toggle" id="animation-style-toggle" role="switch" aria-checked="true" data-action="toggle-animation-style">
                            <span class="ui-toggle__track">
                                <span class="ui-toggle__thumb"></span>
                            </span>
                        </button>
                    </div>
                    <div class="theme-picker">
                        <label class="ui-label">Theme</label>
                        <div class="theme-picker__grid" id="theme-picker-grid"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Pause Button (coarse pointer only) -->
        <button class="mobile-pause-btn" data-action="pause" aria-label="Pause game">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <rect x="4" y="3" width="4" height="14" rx="1" fill="currentColor"/>
                <rect x="12" y="3" width="4" height="14" rx="1" fill="currentColor"/>
            </svg>
        </button>
    </div>
    <script src="game.js"></script>
</body>
</html>
